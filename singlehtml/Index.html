<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
    <title> documentation</title>

    
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1.0" name="viewport">
<meta content="phpdocumentor/guides" name="generator">
<meta content="" name="docsearch:name">
<meta content="" name="docsearch:package_type">
<meta content="" name="docsearch:release">
<meta content="" name="docsearch:version">
<meta content="2024-08-01T20:09:25+00:00" name="docsearch:modified">
<meta content="2024-08-01T20:09:25+00:00" name="dc.modified">
<meta content="2024-08-01T20:09:25+00:00" property="article:modified_time">
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.dc">
<link href="../_resources/css/theme.css" rel="stylesheet">
<link href="https://docs.typo3.org/search/" rel="search" title="Search">
<script src="https://typo3.azureedge.net/typo3infrastructure/universe/dist/webcomponents-loader.js"></script>
<script src="https://typo3.azureedge.net/typo3infrastructure/universe/dist/typo3-universe.js" type="module"></script>
                </head>
<body>
<div class="page">
    
<header>
    <div class="page-topbar">
        <div class="page-topbar-inner">
            <typo3-universe active="documentation">
                <div style="display: block; height: 44px; background-color: #313131;"></div>
            </typo3-universe>
        </div>
    </div>
    <div class="page-header">
        <div class="page-header-inner">
            <div class="row">
                <div class="col-sm-3 col-md-4 col-lg-6">
                    <a class="logo" href="https://docs.typo3.org/" title="TYPO3 Documentation">
                        <img alt="TYPO3 Logo" class="logo-image" src="../_resources/img/typo3-logo.svg" width="484" height="130">
                    </a>
                </div>
                <div class="col-sm-9 col-md-8 col-lg-6">
                    <search role="search">
                        <form action="https://docs.typo3.org/search/search" id="global-search-form" method="get">
			                <div class="sr-only"><label for="globalsearchinput">TYPO3 documentation...</label></div>
                            <div class="input-group mb-3 mt-sm-3">
                                <select class="form-select search__scope" id="searchscope" name="scope">
                                    <option value="">Search all</option>
                                </select>
                                <input autocomplete="off" class="form-control shadow-none" id="globalsearchinput" name="q" placeholder="TYPO3 documentation..." type="text" value="">
                                <button class="btn btn-light search__submit" type="submit"><i class="fa fa-search"></i>&nbsp;<span class="d-none d-md-inline">Search</span></button>
                            </div>
                        </form>
                    </search>
                </div>
            </div>
        </div>
    </div>
</header>    <main class="page-main">
        <div class="page-main-inner">
            <div class="page-main-navigation">
                <nav>
                    <input class="toc-checkbox" id="toggleToc" type="checkbox">

                    
<div class="toc-header">
    <div class="toc-title">
        <a class="toc-title-project" href="#"></a>
            </div>
    <div class="toc-actions">
        <label class="toc-toggle" for="toggleToc">
            Menu
        </label>
    </div>
</div>                    <div class="toc-collapse">
                                                <div aria-label="main navigation" class="toc" role="navigation">
                                                                                </div>
                    </div>
                </nav>
            </div>
            <div class="page-main-content">
                <div class="rst-content">                                                                <!-- content start -->
    <article>
            
<section class="section" id="store-finder">
            <h1>Store finder<a class="headerlink" href="#store-finder" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h1>
            <dl class="field-list simple ">
            <dt class="field-odd">Extension Key</dt>

        <dd class="field-odd">
            
    <p>store_finder</p>
        </dd>
            <dt class="field-odd">Package name</dt>

        <dd class="field-odd">
            
    <p>evoweb/store-finder</p>
        </dd>
            <dt class="field-odd">Version</dt>

        <dd class="field-odd">
            
        </dd>
            <dt class="field-odd">Language</dt>

        <dd class="field-odd">
            
    <p>en</p>
        </dd>
            <dt class="field-odd">Description</dt>

        <dd class="field-odd">
            
    <p>Search for stores based on local address with coordinates compiled with google maps api.</p>
        </dd>
            <dt class="field-odd">Keywords</dt>

        <dd class="field-odd">
            
    <p>Store Finder, POI Map, Google Maps, Configuration</p>
        </dd>
            <dt class="field-odd">Copyright</dt>

        <dd class="field-odd">
            
    <p>2014-2023</p>
        </dd>
            <dt class="field-odd">Author</dt>

        <dd class="field-odd">
            
    <p>Sebastian Fischer</p>
        </dd>
            <dt class="field-odd">License</dt>

        <dd class="field-odd">
            
    <p>This document is published under the
<a href="https://www.opencontent.org/openpub/">Open Publication</a>.
license.</p>
        </dd>
            <dt class="field-odd">Rendered</dt>

        <dd class="field-odd">
            
    <p>Thu, 01 Aug 2024 20:09:25 +0000</p>
        </dd>
    </dl>
            <hr />
            
    <p>The content of this document is related to TYPO3,
a GNU/GPL CMS/Framework available from <a href="http://typo3.org">http://typo3.org</a></p>

            <hr />
            
    <p><strong>Table of Contents:</strong></p>

            <div class="toctree-wrapper compound">
        <ul class="menu-level">
    <li class="toc-item">
    <a href="#introduction-1">Introduction</a>


</li>
    <li class="toc-item">
    <a href="#user-manual">User Manual</a>


</li>
    <li class="toc-item">
    <a href="#administration-1">Administration</a>


</li>
    <li class="toc-item">
    <a href="#configuration-1">Configuration</a>
        <ul class="menu-level-1">
            <li class="toc-item">
    <a href="#settings-1">Settings</a>


</li>
            <li class="toc-item">
    <a href="#view-1">View</a>


</li>
            <li class="toc-item">
    <a href="#persistence-1">Persistence</a>


</li>
            <li class="toc-item">
    <a href="#validation-1">Validation</a>


</li>
            <li class="toc-item">
    <a href="#geocoding-provider">Geocoding provider</a>


</li>
            <li class="toc-item">
    <a href="#event-listener">Event listener</a>


</li>
                    </ul>

</li>
    <li class="toc-item">
    <a href="#templating-1">Templating</a>


</li>
    <li class="toc-item">
    <a href="#tutorial-1">Tutorial</a>
        <ul class="menu-level-1">
            <li class="toc-item">
    <a href="#installation-1">Installation</a>


</li>
            <li class="toc-item">
    <a href="#custom-event-listener">Custom Event Listener</a>


</li>
            <li class="toc-item">
    <a href="#headless-map-rendering">Headless Map Rendering</a>


</li>
                    </ul>

</li>
    <li class="toc-item">
    <a href="#import-command">Import command</a>


</li>
    <li class="toc-item">
    <a href="#deprecation-1">Deprecation</a>


</li>
    <li class="toc-item">
    <a href="#breaking-changes-1">Breaking Changes</a>


</li>
    </ul>
</div>
            
    </section>

        </article>
<article>
            
<section class="section" id="store-finder">
            <h1>Store finder<a class="headerlink" href="#store-finder" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h1>
            <dl class="field-list simple ">
            <dt class="field-odd">Extension Key</dt>

        <dd class="field-odd">
            
    <p>store_finder</p>
        </dd>
            <dt class="field-odd">Package name</dt>

        <dd class="field-odd">
            
    <p>evoweb/store-finder</p>
        </dd>
            <dt class="field-odd">Version</dt>

        <dd class="field-odd">
            
        </dd>
            <dt class="field-odd">Language</dt>

        <dd class="field-odd">
            
    <p>en</p>
        </dd>
            <dt class="field-odd">Description</dt>

        <dd class="field-odd">
            
    <p>Search for stores based on local address with coordinates compiled with google maps api.</p>
        </dd>
            <dt class="field-odd">Keywords</dt>

        <dd class="field-odd">
            
    <p>Store Finder, POI Map, Google Maps, Configuration</p>
        </dd>
            <dt class="field-odd">Copyright</dt>

        <dd class="field-odd">
            
    <p>2014-2023</p>
        </dd>
            <dt class="field-odd">Author</dt>

        <dd class="field-odd">
            
    <p>Sebastian Fischer</p>
        </dd>
            <dt class="field-odd">License</dt>

        <dd class="field-odd">
            
    <p>This document is published under the
<a href="https://www.opencontent.org/openpub/">Open Publication</a>.
license.</p>
        </dd>
            <dt class="field-odd">Rendered</dt>

        <dd class="field-odd">
            
    <p>Thu, 01 Aug 2024 20:09:25 +0000</p>
        </dd>
    </dl>
            <hr />
            
    <p>The content of this document is related to TYPO3,
a GNU/GPL CMS/Framework available from <a href="http://typo3.org">http://typo3.org</a></p>

            <hr />
            
    <p><strong>Table of Contents:</strong></p>

            <div class="toctree-wrapper compound">
        <ul class="menu-level">
    <li class="toc-item">
    <a href="#introduction-1">Introduction</a>


</li>
    <li class="toc-item">
    <a href="#user-manual">User Manual</a>


</li>
    <li class="toc-item">
    <a href="#administration-1">Administration</a>


</li>
    <li class="toc-item">
    <a href="#configuration-1">Configuration</a>
        <ul class="menu-level-1">
            <li class="toc-item">
    <a href="#settings-1">Settings</a>


</li>
            <li class="toc-item">
    <a href="#view-1">View</a>


</li>
            <li class="toc-item">
    <a href="#persistence-1">Persistence</a>


</li>
            <li class="toc-item">
    <a href="#validation-1">Validation</a>


</li>
            <li class="toc-item">
    <a href="#geocoding-provider">Geocoding provider</a>


</li>
            <li class="toc-item">
    <a href="#event-listener">Event listener</a>


</li>
                    </ul>

</li>
    <li class="toc-item">
    <a href="#templating-1">Templating</a>


</li>
    <li class="toc-item">
    <a href="#tutorial-1">Tutorial</a>
        <ul class="menu-level-1">
            <li class="toc-item">
    <a href="#installation-1">Installation</a>


</li>
            <li class="toc-item">
    <a href="#custom-event-listener">Custom Event Listener</a>


</li>
            <li class="toc-item">
    <a href="#headless-map-rendering">Headless Map Rendering</a>


</li>
                    </ul>

</li>
    <li class="toc-item">
    <a href="#import-command">Import command</a>


</li>
    <li class="toc-item">
    <a href="#deprecation-1">Deprecation</a>


</li>
    <li class="toc-item">
    <a href="#breaking-changes-1">Breaking Changes</a>


</li>
    </ul>
</div>
            
    </section>

        </article>
<article>
            
<section class="section" id="introduction-1" data-rst-anchor="introduction">
            <a id="introduction"></a>
            <h1>Introduction<a class="headerlink" href="#introduction-1" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h1>
            <section class="section" id="search-with-result-map-and-list">
            <h2>Search with result map and list<a class="headerlink" href="#search-with-result-map-and-list" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            
    <p>Purpose of this extension is, to have a search for locations based on
an entered or configured address. The result displays a google map with
marker for each location and a list of all locations. On click on a
marker an info window with additional information get shown.</p>

    </section>
            <section class="section" id="search-form">
            <h2>Search form:<a class="headerlink" href="#search-form" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            <figure>
    <img
    src="Images/introduction_search.png"
    width="711px"            alt="Search form"        />


            
            </figure>
    </section>
            <section class="section" id="result-map-and-list">
            <h2>Result map and list:<a class="headerlink" href="#result-map-and-list" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            <figure>
    <img
    src="Images/introduction_result.png"
    width="711px"            alt="Result map and list"        />


            
            </figure>
    </section>
            <section class="section" id="single-points-of-interest">
            <h2>Single points of interest<a class="headerlink" href="#single-points-of-interest" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            
    <p>Its also possible to pre define a single location to display it on the
map without search form. This is useful to have map with single point
of interest.
For developer its also possible to use the plugin in their extension
as map renderer for the location.</p>

    </section>
            <section class="section" id="how-geolocations-are-computed">
            <h2>How geolocations are computed<a class="headerlink" href="#how-geolocations-are-computed" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            
    <p>Every location gets geocoded with help of google maps api after saving
the record in backend. By this its important to know, that the google
maps website needs to be reached from the webserver.</p>

            
    <p>The coordinates are stored in the record each time when the record
gets saved. If at one point the address gets changed the coordinate
gets fetched from the api again.</p>

            
    <p>Search queries get geocoded the same way by the google maps api. To
reduce the api requests the coordinates get stored in the session.
So if a query gets send another time the api do not get requested again.</p>

    </section>
    </section>

        </article>
<article>
            
<section class="section" id="user-manual" data-rst-anchor="user_manual">
            <a id="user_manual"></a>
            <h1>User Manual<a class="headerlink" href="#user-manual" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h1>
            
    <p>The simple version would consists of a folder for the locations records,
a page for the plugin and the plugin it self. In this plugin the folder
needs to be selected in tab behaviour field record storage page.</p>

            
    <p>If the usage of categories is unnecessary the configuration is done at
this point.</p>

    </section>

        </article>
<article>
            
<section class="section" id="administration-1" data-rst-anchor="administration">
            <a id="administration"></a>
            <h1>Administration<a class="headerlink" href="#administration-1" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h1>
            
    <p>The part for administrator is fairly simple. Just install the extension with</p>

                <div class="code-block-caption">
        <span class="caption-text">Enter on shell</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs bash">composer require evoweb/store-finder</code></pre>
    <div>        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p>If you use a different google maps key, like for a business account, you need to
configure the extension in the em. Just hit the gear on the line of the
installed store_finder and enter the api console key in the designated field.</p>

            
    <p>In case the google maps geocode url changes and the extension has no update for,
that the url can be changed in the same configuration part. Just enter the url
in the field Url used for geocode.</p>

            <section class="section" id="configuration">
            <h2>Configuration:<a class="headerlink" href="#configuration" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            <figure>
    <img
    src="Images/admin_config.png"
                alt="Search form"        />


            
            </figure>
    </section>
            <section class="section" id="cors-settings">
            <h2>CORS settings:<a class="headerlink" href="#cors-settings" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            

<ul>
    <li class="dash">
    <p>for backend rendering in locations records the content security policy header
needs to be modified to allow loading images via https</p>
<div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs apache"><span class="hljs-attribute">img</span>-src 'self' data: https:;</code></pre>
    <div>        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div></li>
    <li class="dash">
    <p>for frontend rendering of google AND OS map the csp header needs to be
modified to allow script files via https</p>
<div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs apache"><span class="hljs-attribute">script</span>-src 'self' 'unsafe-inline' blob: data: https:;</code></pre>
    <div>        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div></li>
    <li class="dash">
    <p>in addition the frontend rendering of OS map needs the csp header to allow
loading style files via https</p>
<div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs apache"><span class="hljs-attribute">style</span>-src 'self' 'unsafe-inline' https:;</code></pre>
    <div>        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div></li>
</ul>

    </section>
    </section>

        </article>
<article>
            
<section class="section" id="configuration-1" data-rst-anchor="configuration">
            <a id="configuration"></a>
            <h1>Configuration<a class="headerlink" href="#configuration-1" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h1>
            <div class="toctree-wrapper compound">
        <ul class="menu-level">
    <li class="toc-item">
    <a href="#settings-1">Settings</a>


</li>
    <li class="toc-item">
    <a href="#view-1">View</a>


</li>
    <li class="toc-item">
    <a href="#persistence-1">Persistence</a>


</li>
    <li class="toc-item">
    <a href="#validation-1">Validation</a>


</li>
    <li class="toc-item">
    <a href="#geocoding-provider">Geocoding provider</a>


</li>
    <li class="toc-item">
    <a href="#event-listener">Event listener</a>


</li>
    </ul>
</div>
    </section>

        </article>
<article>
            
<section class="section" id="settings-1" data-rst-anchor="settings">
            <a id="settings"></a>
            <h1>Settings<a class="headerlink" href="#settings-1" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h1>
            <div class="contents-wrapper">
        <ul class="menu-level">
    <li class="toc-item">
    <a href="#showbeforesearch">showBeforeSearch</a>


</li>
    <li class="toc-item">
    <a href="#showaftersearch">showAfterSearch</a>


</li>
    <li class="toc-item">
    <a href="#apiv3layers">apiV3Layers</a>


</li>
    <li class="toc-item">
    <a href="#limit">limit</a>


</li>
    <li class="toc-item">
    <a href="#allowedcountries">allowedCountries</a>


</li>
    <li class="toc-item">
    <a href="#categories">categories</a>


</li>
    <li class="toc-item">
    <a href="#categorypriority">categoryPriority</a>


</li>
    <li class="toc-item">
    <a href="#singlelocationid">singleLocationId</a>


</li>
    <li class="toc-item">
    <a href="#geocoderprovider">geocoderProvider</a>


</li>
    <li class="toc-item">
    <a href="#apiconsolekey">apiConsoleKey</a>


</li>
    <li class="toc-item">
    <a href="#apiconsolekeygeocoding">apiConsoleKeyGeocoding</a>


</li>
    <li class="toc-item">
    <a href="#distanceunit">distanceUnit</a>


</li>
    <li class="toc-item">
    <a href="#language">language</a>


</li>
    <li class="toc-item">
    <a href="#showstoreimage">showStoreImage</a>


</li>
    <li class="toc-item">
    <a href="#resultpageid">resultPageId</a>


</li>
    <li class="toc-item">
    <a href="#mapsize-height">mapSize.height</a>


</li>
    <li class="toc-item">
    <a href="#mapsize-width">mapSize.width</a>


</li>
    <li class="toc-item">
    <a href="#override">override</a>


</li>
    <li class="toc-item">
    <a href="#disablefetchlocationinaction">disableFetchLocationInAction</a>


</li>
    </ul>
</div>
            <section class="section" id="showbeforesearch" data-rst-anchor="settings-showBeforeSearch">
            <a id="settings-showBeforeSearch"></a>
            <h2>showBeforeSearch<a class="headerlink" href="#showbeforesearch" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            <dl>
                        <dt><em class="aspect">Property</em></dt>
        
        <dd>showBeforeSearch</dd>
                                <dt><em class="aspect">Data type</em></dt>
        
        <dd><a href="https://docs.typo3.org/m/typo3/reference-typoscript/12.4/en-us/DataTypes/Index.html#data-type-integer">integer</a></dd>
                                <dt><em class="aspect">Description</em></dt>
        
        <dd>Defines what should get displayed before the search was triggered</dd>
                                <dt><em class="aspect">Default</em></dt>
        
        <dd>1</dd>
                                <dt><em class="aspect">Possible values</em></dt>
        
        <dd>1 &amp; 2 &amp; 4</dd>
            </dl>
    </section>
            <section class="section" id="showaftersearch" data-rst-anchor="settings-showAfterSearch">
            <a id="settings-showAfterSearch"></a>
            <h2>showAfterSearch<a class="headerlink" href="#showaftersearch" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            <dl>
                        <dt><em class="aspect">Property</em></dt>
        
        <dd>showBeforeSearch</dd>
                                <dt><em class="aspect">Data type</em></dt>
        
        <dd><a href="https://docs.typo3.org/m/typo3/reference-typoscript/12.4/en-us/DataTypes/Index.html#data-type-integer">integer</a></dd>
                                <dt><em class="aspect">Description</em></dt>
        
        <dd>Defines what should get displayed after the search was triggered</dd>
                                <dt><em class="aspect">Default</em></dt>
        
        <dd>6</dd>
                                <dt><em class="aspect">Possible values</em></dt>
        
        <dd>1 &amp; 2 &amp; 4</dd>
            </dl>
    </section>
            <section class="section" id="apiv3layers" data-rst-anchor="settings-apiV3Layers">
            <a id="settings-apiV3Layers"></a>
            <h2>apiV3Layers<a class="headerlink" href="#apiv3layers" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            <dl>
                        <dt><em class="aspect">Property</em></dt>
        
        <dd>mapConfiguration.apiV3Layers</dd>
                                <dt><em class="aspect">Data type</em></dt>
        
        <dd>list</dd>
                                <dt><em class="aspect">Description</em></dt>
        
        <dd>Select which layers should be rendered in the map</dd>
                                <dt><em class="aspect">Default</em></dt>
        
        <dd>none</dd>
                                <dt><em class="aspect">Possible values</em></dt>
        
        <dd>traffic, bicycling, kml</dd>
            </dl>
    </section>
            <section class="section" id="limit" data-rst-anchor="limit">
            <a id="limit"></a>
            <h2>limit<a class="headerlink" href="#limit" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            <dl>
                        <dt><em class="aspect">Property</em></dt>
        
        <dd>limit</dd>
                                <dt><em class="aspect">Data type</em></dt>
        
        <dd>integer</dd>
                                <dt><em class="aspect">Description</em></dt>
        
        <dd>//@todo check if still needed List of country ISO2 codes that may be rendered in country select of search form</dd>
                                <dt><em class="aspect">Default</em></dt>
        
        <dd>20</dd>
            </dl>
    </section>
            <section class="section" id="allowedcountries" data-rst-anchor="allowedCountries">
            <a id="allowedCountries"></a>
            <h2>allowedCountries<a class="headerlink" href="#allowedcountries" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            <dl>
                        <dt><em class="aspect">Property</em></dt>
        
        <dd>allowedCountries</dd>
                                <dt><em class="aspect">Data type</em></dt>
        
        <dd>list</dd>
                                <dt><em class="aspect">Description</em></dt>
        
        <dd>List of country ISO2 codes that may be rendered in country select of search form</dd>
                                <dt><em class="aspect">Default</em></dt>
        
        <dd>none</dd>
            </dl>
    </section>
            <section class="section" id="categories" data-rst-anchor="categories">
            <a id="categories"></a>
            <h2>categories<a class="headerlink" href="#categories" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            <dl>
                        <dt><em class="aspect">Property</em></dt>
        
        <dd>categories</dd>
                                <dt><em class="aspect">Data type</em></dt>
        
        <dd>list</dd>
                                <dt><em class="aspect">Description</em></dt>
        
        <dd>List of categories as base to render category tree in search form</dd>
                                <dt><em class="aspect">Default</em></dt>
        
        <dd>none</dd>
            </dl>
    </section>
            <section class="section" id="categorypriority" data-rst-anchor="categoryPriority">
            <a id="categoryPriority"></a>
            <h2>categoryPriority<a class="headerlink" href="#categorypriority" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            <dl>
                        <dt><em class="aspect">Property</em></dt>
        
        <dd>categoryPriority</dd>
                                <dt><em class="aspect">Data type</em></dt>
        
        <dd>string</dd>
                                <dt><em class="aspect">Description</em></dt>
        
        <dd>List of categories as base to render category tree in search form</dd>
                                <dt><em class="aspect">Default</em></dt>
        
        <dd>useAsFilterInFrontend</dd>
                                <dt><em class="aspect">Possible values</em></dt>
        
        <dd>useAsFilterInFrontend, useParentIfNoFilterSelected, limitResultsToCategories</dd>
            </dl>
    </section>
            <section class="section" id="singlelocationid" data-rst-anchor="singleLocationId">
            <a id="singleLocationId"></a>
            <h2>singleLocationId<a class="headerlink" href="#singlelocationid" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            <dl>
                        <dt><em class="aspect">Property</em></dt>
        
        <dd>singleLocationId</dd>
                                <dt><em class="aspect">Data type</em></dt>
        
        <dd>integer</dd>
                                <dt><em class="aspect">Description</em></dt>
        
        <dd>Id of an single location record to get rendered in map without search query</dd>
                                <dt><em class="aspect">Default</em></dt>
        
        <dd>none</dd>
            </dl>
    </section>
            <section class="section" id="geocoderprovider" data-rst-anchor="geocoderProvider">
            <a id="geocoderProvider"></a>
            <h2>geocoderProvider<a class="headerlink" href="#geocoderprovider" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            <dl>
                        <dt><em class="aspect">Property</em></dt>
        
        <dd>geocoderProvider</dd>
                                <dt><em class="aspect">Data type</em></dt>
        
        <dd>string</dd>
                                <dt><em class="aspect">Description</em></dt>
        
        <dd>Contains class name of geocoding provider to enable changing to different services</dd>
            </dl>
            
    <p><em class="aspect">Default</em></p>

    </section>
            <section class="section" id="apiconsolekey" data-rst-anchor="apiConsoleKey">
            <a id="apiConsoleKey"></a>
            <h2>apiConsoleKey<a class="headerlink" href="#apiconsolekey" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            <dl>
                        <dt><em class="aspect">Property</em></dt>
        
        <dd>apiConsoleKey</dd>
                                <dt><em class="aspect">Data type</em></dt>
        
        <dd>string</dd>
                                <dt><em class="aspect">Description</em></dt>
        
        <dd>Used for geocoding and reverse geocoding of addresses via Google Maps Geocoding API. Must have access for Google Maps Geocoding API and can only be restricted by ip addresses.</dd>
            </dl>
            
    <p><em class="aspect">Default</em></p>

    </section>
            <section class="section" id="apiconsolekeygeocoding" data-rst-anchor="apiConsoleKeyGeocoding">
            <a id="apiConsoleKeyGeocoding"></a>
            <h2>apiConsoleKeyGeocoding<a class="headerlink" href="#apiconsolekeygeocoding" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            <dl>
                        <dt><em class="aspect">Property</em></dt>
        
        <dd>apiConsoleKeyGeocoding</dd>
                                <dt><em class="aspect">Data type</em></dt>
        
        <dd>string</dd>
                                <dt><em class="aspect">Description</em></dt>
        
        <dd>Used for output map via Google Maps JavaScript API. Must have access for Google Maps JavaScript API and can only be restricted by domains.</dd>
            </dl>
            
    <p><em class="aspect">Default</em></p>

    </section>
            <section class="section" id="distanceunit" data-rst-anchor="distanceUnit">
            <a id="distanceUnit"></a>
            <h2>distanceUnit<a class="headerlink" href="#distanceunit" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            <dl>
                        <dt><em class="aspect">Property</em></dt>
        
        <dd>distanceUnit</dd>
                                <dt><em class="aspect">Data type</em></dt>
        
        <dd>string</dd>
                                <dt><em class="aspect">Description</em></dt>
        
        <dd>Base of distance values given in range select of search form. If miles is set the range gets multiplied with 1.6</dd>
                                <dt><em class="aspect">Default</em></dt>
        
        <dd>kilometer</dd>
                                <dt><em class="aspect">Possible values</em></dt>
        
        <dd>miles, kilometer</dd>
            </dl>
    </section>
            <section class="section" id="language" data-rst-anchor="mc-language">
            <a id="mc-language"></a>
            <h2>language<a class="headerlink" href="#language" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            <dl>
                        <dt><em class="aspect">Property</em></dt>
        
        <dd>mapConfiguration.language</dd>
                                <dt><em class="aspect">Data type</em></dt>
        
        <dd>string</dd>
                                <dt><em class="aspect">Description</em></dt>
        
        <dd>ISO2 definition for language to use by google map</dd>
                                <dt><em class="aspect">Default</em></dt>
        
        <dd>en</dd>
            </dl>
    </section>
            <section class="section" id="showstoreimage" data-rst-anchor="showStoreImage">
            <a id="showStoreImage"></a>
            <h2>showStoreImage<a class="headerlink" href="#showstoreimage" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            <dl>
                        <dt><em class="aspect">Property</em></dt>
        
        <dd>showStoreImage</dd>
                                <dt><em class="aspect">Data type</em></dt>
        
        <dd>boolean</dd>
                                <dt><em class="aspect">Description</em></dt>
        
        <dd>If set the location store image gets rendered in result mapBubble</dd>
                                <dt><em class="aspect">Default</em></dt>
        
        <dd>1</dd>
            </dl>
    </section>
            <section class="section" id="resultpageid" data-rst-anchor="resultPageId">
            <a id="resultPageId"></a>
            <h2>resultPageId<a class="headerlink" href="#resultpageid" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            <dl>
                        <dt><em class="aspect">Property</em></dt>
        
        <dd>resultPageId</dd>
                                <dt><em class="aspect">Data type</em></dt>
        
        <dd>integer</dd>
                                <dt><em class="aspect">Description</em></dt>
        
        <dd>If set the search result gets rendered on a different page</dd>
                                <dt><em class="aspect">Default</em></dt>
        
        <dd>none</dd>
            </dl>
    </section>
            <section class="section" id="mapsize-height" data-rst-anchor="ms-height">
            <a id="ms-height"></a>
            <h2>mapSize.height<a class="headerlink" href="#mapsize-height" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            <dl>
                        <dt><em class="aspect">Property</em></dt>
        
        <dd>mapSize.height</dd>
                                <dt><em class="aspect">Data type</em></dt>
        
        <dd>integer</dd>
                                <dt><em class="aspect">Description</em></dt>
        
        <dd><em class="aspect">Default</em> height of map used in inline style</dd>
                                <dt><em class="aspect">Default</em></dt>
        
        <dd>400</dd>
            </dl>
    </section>
            <section class="section" id="mapsize-width" data-rst-anchor="ms-width">
            <a id="ms-width"></a>
            <h2>mapSize.width<a class="headerlink" href="#mapsize-width" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            <dl>
                        <dt><em class="aspect">Property</em></dt>
        
        <dd>mapSize.width</dd>
                                <dt><em class="aspect">Data type</em></dt>
        
        <dd>integer</dd>
                                <dt><em class="aspect">Description</em></dt>
        
        <dd><em class="aspect">Default</em> width of map used in inline style</dd>
                                <dt><em class="aspect">Default</em></dt>
        
        <dd>600</dd>
            </dl>
    </section>
            <section class="section" id="override" data-rst-anchor="override">
            <a id="override"></a>
            <h2>override<a class="headerlink" href="#override" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            <dl>
                        <dt><em class="aspect">Property</em></dt>
        
        <dd>override</dd>
                                <dt><em class="aspect">Data type</em></dt>
        
        <dd>array</dd>
                                <dt><em class="aspect">Description</em></dt>
        
        <dd>Sometimes the admin want to restrict configuration available in the flexform.
With the override its possible to define values that should override the configuration done in the flexform.</dd>
            </dl>
    </section>
            <section class="section" id="disablefetchlocationinaction" data-rst-anchor="disableFetchLocationInAction">
            <a id="disableFetchLocationInAction"></a>
            <h2>disableFetchLocationInAction<a class="headerlink" href="#disablefetchlocationinaction" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            <dl>
                        <dt><em class="aspect">Property</em></dt>
        
        <dd>disableFetchLocationInAction</dd>
                                <dt><em class="aspect">Data type</em></dt>
        
        <dd>array of strings</dd>
                                <dt><em class="aspect">Description</em></dt>
        
        <dd>
    <p>Disabling the fetching of locations based on constraints individually.
This disables the fetching of locations in map, cachedMap and search action.
Use this only in combination with a listener for MapGetLocationsByConstraintsEvent or you do not get any output at all.</p>
<dl>
                        <dt>0 = map</dt>
        
        <dd>this is the default map action</dd>
                                <dt>1 = cachedMap</dt>
        
        <dd>this is the cached map action</dd>
                                <dt>2 = search</dt>
        
        <dd>this is the search action</dd>
            </dl></dd>
                                <dt><em class="aspect">Example</em></dt>
        
        <dd>    <div class="code-block-caption">
        <span class="caption-text">EXT:site_package/Configuration/TypoScript/setup.typoscript</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript">disableFetchLocationInAction {
  0 = map
  <span class="hljs-title">1</span> = cachedMap
  <span class="hljs-title">2</span> = search
}</code></pre>
    <div>        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div></dd>
            </dl>
    </section>
    </section>

        </article>
<article>
            
<section class="section" id="view-1" data-rst-anchor="view">
            <a id="view"></a>
            <h1>View<a class="headerlink" href="#view-1" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h1>
            <section class="section" id="templaterootpaths" data-rst-anchor="view-templateRootPaths">
            <a id="view-templateRootPaths"></a>
            <h2>templateRootPaths<a class="headerlink" href="#templaterootpaths" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            <dl>
                        <dt><em class="aspect">Property</em></dt>
        
        <dd>templateRootPaths</dd>
                                <dt><em class="aspect">Data type</em></dt>
        
        <dd>array of file paths</dd>
                                <dt><em class="aspect">Description</em></dt>
        
        <dd>This defines in which path the templates are stored. This is needed to modify the template without modifing files in the extension.</dd>
            </dl>
                <div class="code-block-caption">
        <span class="caption-text">EXT:my_extension/Configuration/TypoScript/setup.typoscript</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript">plugin.tx_storefinder.view {
    templateRootPaths {
        <span class="hljs-title">100</span> = <span class="hljs-bullet">EXT:my_extension/Resources/Private/Templates/StoreFinder</span>
    }
}</code></pre>
    <div>        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="partialrootpaths" data-rst-anchor="view-partialRootPaths">
            <a id="view-partialRootPaths"></a>
            <h2>partialRootPaths<a class="headerlink" href="#partialrootpaths" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            <dl>
                        <dt><em class="aspect">Property</em></dt>
        
        <dd>partialRootPaths</dd>
                                <dt><em class="aspect">Data type</em></dt>
        
        <dd>array of file paths</dd>
                                <dt><em class="aspect">Description</em></dt>
        
        <dd>This defines in which path the partials are stored. This is needed to modify the partials without modifing files in the extension.</dd>
            </dl>
                <div class="code-block-caption">
        <span class="caption-text">EXT:my_extension/Configuration/TypoScript/setup.typoscript</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript">plugin.tx_storefinder.view {
    partialRootPaths {
        <span class="hljs-title">100</span> = <span class="hljs-bullet">EXT:my_extension/Resources/Private/Partials/StoreFinder</span>
    }
}</code></pre>
    <div>        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>

        </article>
<article>
            
<section class="section" id="persistence-1" data-rst-anchor="persistence">
            <a id="persistence"></a>
            <h1>Persistence<a class="headerlink" href="#persistence-1" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h1>
            <section class="section" id="storagepid" data-rst-anchor="persistence-storagePid">
            <a id="persistence-storagePid"></a>
            <h2>storagePid<a class="headerlink" href="#storagepid" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            <dl>
                        <dt><em class="aspect">Property</em></dt>
        
        <dd>storagePid</dd>
                                <dt><em class="aspect">Data type</em></dt>
        
        <dd>List of <a href="https://docs.typo3.org/m/typo3/reference-typoscript/12.4/en-us/DataTypes/Index.html#data-type-integer">storage folder pids</a></dd>
                                <dt><em class="aspect">Description</em></dt>
        
        <dd>Comma-separated list of storage page ids. In content elements please use the <code>Record Storage Page</code> field of the plugin.</dd>
            </dl>
    </section>
    </section>

        </article>
<article>
            
<section class="section" id="validation-1" data-rst-anchor="validation">
            <a id="validation"></a>
            <h1>Validation<a class="headerlink" href="#validation-1" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h1>
            <section class="section" id="purpose-of-validators">
            <h2>Purpose of Validators<a class="headerlink" href="#purpose-of-validators" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            
    <p>Validators are a mechanism to ensure that all information given by the user
meet the expectation of the extension. Either if the values make sense in terms
of format like zip or in required information value like city.</p>

            
    <p>If values need to be enforce your should use the <a href="#RequiredValidator">RequiredValidator</a> because
this validator does not only check if the value of the configured field is
filled but it also serves as a signal for the Required Partial to render the
corresponding flag.</p>

            
    <p>All validators are optional, could be set single or may be even assigned multiple
times to a field. Despite the concept of extbase you are free to choose how many
validators should take care of a value.</p>

    </section>
            <section class="section" id="different-possibilities-of-assigning-validators">
            <h2>Different possibilities of assigning validators<a class="headerlink" href="#different-possibilities-of-assigning-validators" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            
    <p>In case you want to have no validation at all for a field was was configured
by default as required you need to empty the associated validators. Look at the
example given where the validators of the email gets removed.</p>

            <section class="section" id="remove-validators">
            <h3>Remove validators<a class="headerlink" href="#remove-validators" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h3>
                <div class="code-block-caption">
        <span class="caption-text">EXT:my_extension/Configuration/TypoScript/setup.typoscript</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript">plugin.tx_storefinder.settings.validation.zipcode &gt;</code></pre>
    <div>        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p>If only one validator is needed you could assign it directly to the field like
below.</p>

    </section>
            <section class="section" id="assign-only-one-validator">
            <h3>Assign only one validator<a class="headerlink" href="#assign-only-one-validator" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h3>
                <div class="code-block-caption">
        <span class="caption-text">EXT:my_extension/Configuration/TypoScript/setup.typoscript</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript">plugin.tx_storefinder.settings.validation.zipcode = Evoweb\StoreFinder\Validation\Validator\RequiredValidator</code></pre>
    <div>        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p>And finaly it&#039;s possible to have multiple validators for one field like in the
next example.</p>

    </section>
            <section class="section" id="assign-multiple-validators">
            <h3>Assign multiple validators<a class="headerlink" href="#assign-multiple-validators" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h3>
                <div class="code-block-caption">
        <span class="caption-text">EXT:my_extension/Configuration/TypoScript/setup.typoscript</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript">plugin.tx_storefinder.settings.validation.city {
   <span class="hljs-title">1</span> = Evoweb\StoreFinder\Validation\Validator\RequiredValidator
   <span class="hljs-title">2</span> = StringLength
}</code></pre>
    <div>        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p>Regarding validator it&#039;s possible to have values attached to the assigned one.
This is beneficial if you want to check against conditions that are not equal
in different cases. One point where this is shown best with is the length of
passwords.</p>

            
    <p>In total you have three possible combination of validator assignments for each
field that you use in your form. You have none, one and multiple validators.
And in case of a validator present you can add options too override the default
that is set in the validator.</p>

    </section>
    </section>
            <section class="section" id="special-validators">
            <h2>Special validators<a class="headerlink" href="#special-validators" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            
    <p>The ConstraintValidator is not meant to be used for field validation. This validator
is a special construct to make the configuration via TypoScript possible. All
others are free to combine. If a validator is only suited for a certain field
it will be mentioned in the detail configuration.</p>

    </section>
            <section class="section" id="prefixing-needed-for-non-extbase-validators">
            <h2>Prefixing needed for non extbase validators<a class="headerlink" href="#prefixing-needed-for-non-extbase-validators" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            
    <p>To use the extension validators you need to prefix them in the TypoScript with
EvowebStoreFinderValidationValidator. For all validators without this
prefix the validation assumes that they are extbase specific validators and use
them as such.</p>

            
    <p>Secondly this makes it possible to use custom validators that do not come with
extbase or store_finder. Just code your validator and make it available for auto
loading (either in an extbase standard path or via ext_autoload.php). Afterwards
you are ready to use your validator like in the following example.</p>

            <section class="section" id="custom-validator-usage">
            <h3>Custom validator usage<a class="headerlink" href="#custom-validator-usage" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h3>
                <div class="code-block-caption">
        <span class="caption-text">EXT:my_extension/Configuration/TypoScript/setup.typoscript</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript">plugin.tx_storefinder.settings.validation.create.city {
   <span class="hljs-title">1</span> = Evoweb\StoreFinder\Validation\Validator\RequiredValidator
}</code></pre>
    <div>        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
            <section class="section" id="available-validators">
            <h2>Available validators<a class="headerlink" href="#available-validators" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            
    <p>Beside the validators that come with extbase and which are although available
in the different processes, the registration come with a set of specific ones
that are tailored to the special need. The following lists all validators
which are suited for the usage on fields.</p>

            <section class="section" id="requiredvalidator" data-rst-anchor="RequiredValidator">
            <a id="RequiredValidator"></a>
            <h3>RequiredValidator<a class="headerlink" href="#requiredvalidator" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h3>
            <dl>
                        <dt><em class="aspect">Property</em></dt>
        
        <dd>RequiredValidator</dd>
                                <dt><em class="aspect">Data type</em></dt>
        
        <dd><a href="https://docs.typo3.org/m/typo3/reference-typoscript/12.4/en-us/DataTypes/Index.html#data-type-string">string</a></dd>
                                <dt><em class="aspect">Description</em></dt>
        
        <dd>This validator serves two purpose. First of check if the field contains
a value and that it is not empty. Second the rendering uses this
validator as condition to render required sign or not.</dd>
            </dl>
    </section>
    </section>
    </section>

        </article>
<article>
            
<section class="section" id="geocoding-provider" data-rst-anchor="geocoding">
            <a id="geocoding"></a>
            <h1>Geocoding provider<a class="headerlink" href="#geocoding-provider" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h1>
            <section class="section" id="changing-geocoding-provider">
            <h2>Changing geocoding provider<a class="headerlink" href="#changing-geocoding-provider" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            
    <p>By using the <code>geocoder-php/geocoder</code> package it&#039;s possible to change the geocoding provider.</p>

            
    <p>As default the <code>geocoder-php/google-maps-provider</code> package is required. But it&#039;s possible to
require different packages in the project composer.json. A list of available provider can be
found here <a href="https://github.com/geocoder-php/Geocoder#address">geocoder-php/Geocoder</a></p>

            
    <p>This can be achieved by</p>

                <div class="code-block-caption">
        <span class="caption-text">Enter on shell</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs bash">composer require geocoder-php/nominatim-provider</code></pre>
    <div>        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="extension-configuration">
            <h2>Extension configuration<a class="headerlink" href="#extension-configuration" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            
    <p>If you choose to use a different providers it&#039;s important to set the provider classname in the
field geocoderProvider:</p>

                <div class="code-block-caption">
        <span class="caption-text">Settings &gt; Extension configuration</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript">geocoderProvider = Geocoder\Provider\Nominatim\Nominatim</code></pre>
    <div>        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="typoscript-constants">
            <h2>TypoScript constants<a class="headerlink" href="#typoscript-constants" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            
    <p>If you want to use the additional provider for geocoding search results too, you need to change the constant</p>

                <div class="code-block-caption">
        <span class="caption-text">EXT:my_extension/Configuration/TypoScript/constants.typoscript</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript">plugin.tx_storefinder.geocoderProvider = Geocoder\Provider\Nominatim\Nominatim</code></pre>
    <div>        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>

        </article>
<article>
            
<section class="section" id="event-listener" data-rst-anchor="eventlistener">
            <a id="eventlistener"></a>
            <h1>Event listener<a class="headerlink" href="#event-listener" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h1>
            <section class="section" id="introduction">
            <h2>Introduction<a class="headerlink" href="#introduction" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            
    <p>It is possible to use various custom event listener to use custom location loading logic. If you need
a modified sorting or locations based on other constraints then the provided, it is possible to override
the loading completly.</p>

    </section>
            <section class="section" id="adding-event-listeners">
            <h2>Adding event listeners<a class="headerlink" href="#adding-event-listeners" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            
    <p>Add the following code to the Configuration/Services.yaml of your sitepackage to use the example listener.</p>

                <div class="code-block-caption">
        <span class="caption-text">MapGetLocationsByConstraintsEventListener.php</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs php"><span class="hljs-keyword">namespace</span> <span class="hljs-title">Evoweb</span>\<span class="hljs-title">StoreFinder</span>\<span class="hljs-title">EventListener</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">Evoweb</span>\<span class="hljs-title">StoreFinder</span>\<span class="hljs-title">Controller</span>\<span class="hljs-title">Event</span>\<span class="hljs-title">MapGetLocationsByConstraintsEvent</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">TYPO3</span>\<span class="hljs-title">CMS</span>\<span class="hljs-title">Core</span>\<span class="hljs-title">Attribute</span>\<span class="hljs-title">AsEventListener</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MapGetLocationsByConstraintsEventListener</span>
</span>{
   <span class="hljs-comment">#[AsEventListener('storefinder_mapcontroller_locationsfetched', MapGetLocationsByConstraintsEvent::class)]</span>
   <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__invoke</span><span class="hljs-params">(MapGetLocationsByConstraintsEvent $event)</span>: <span class="hljs-title">void</span>
   </span>{
   }
}</code></pre>
    <div>        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p>More explanation for your custom event listener can be found in the <code>tutorial &lt;_customEventListener&gt;</code></p>

    </section>
            <section class="section" id="additional-configuration">
            <h2>Additional configuration<a class="headerlink" href="#additional-configuration" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            <section class="section" id="performance-improvement">
            <h3>Performance improvement<a class="headerlink" href="#performance-improvement" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h3>
            
    <p>When using event listeners it&#039;s adviced to set typoscript setup
<code>plugin.tx_storefinder.settings.disableLocationFetchLogic = 1</code>
to improve performance. By doing so, all default fetching will be disabled.</p>

                <div class="code-block-caption">
        <span class="caption-text">EXT:my_extension/Configuration/TypoScript/setup.typoscript</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript">plugin.tx_storefinder.settings.disableLocationFetchLogic = 1</code></pre>
    <div>        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p>Listener must follow the symfony/event concept [<a href="https://symfony.com/doc/current/event_dispatcher.html">https://symfony.com/doc/current/event_dispatcher.html</a>]</p>

    </section>
            <section class="section" id="radius-not-automatically-detected">
            <h3>Radius not automatically detected<a class="headerlink" href="#radius-not-automatically-detected" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h3>
            
    <p>If you use a custom location loading mechanism, the location::distance property will be emtpy. Atleast if you do not
fill them on your own. In case the distance is empty the default zoom level detection has nothing to work with. In
this case, you need to set the zoom level in the template OR the radius in TypoScript</p>

                <div class="code-block-caption">
        <span class="caption-text">EXT:my_extension/Configuration/TypoScript/setup.typoscript</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript">plugin.tx_storefinder.settings.defaultConstraint.radius = 20</code></pre>
    <div>        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
            <section class="section" id="modify-locations-in-storefindermiddleware">
            <h2>Modify locations in StoreFinderMiddleware<a class="headerlink" href="#modify-locations-in-storefindermiddleware" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            
    <p>It&#039;s possible to change locations records from store finder middleware before
sending the json response. Use the ModifyMiddlewareLocationsListener as an
example of how to change values.</p>

            
    <p>The registration got simplified in TYPO3 13.x</p>

    </section>
    </section>

        </article>
<article>
            
<section class="section" id="templating-1" data-rst-anchor="templating">
            <a id="templating"></a>
            <h1>Templating<a class="headerlink" href="#templating-1" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h1>
            <section class="section" id="templates-partials-and-layouts">
            <h2>Templates, partials and layouts<a class="headerlink" href="#templates-partials-and-layouts" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            
    <p>Like every other extbase extension its possible to configure the fluid
templates, partials and layout path via typoscript. Beside that is also
possible to configure the templates and partials path in the plugin.</p>

            <section class="section" id="example">
            <h3>Example:<a class="headerlink" href="#example" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h3>
                <div class="code-block-caption">
        <span class="caption-text">EXT:my_extension/Configuration/TypoScript/setup.typoscript</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript">plugin.tx_storefinder.view {
    templateRootPath =
    partialRootPath =
    layoutRootPath =
}</code></pre>
    <div>        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
            <section class="section" id="viewhelper">
            <h2>Viewhelper<a class="headerlink" href="#viewhelper" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            
    <p>Beside the default viewhelpers of fluid the extension comes with three
additional viewhelpers. These are used to render the search like the
form.selectCountries viewhelper, the map like the minify viewhelper and
select what to render based on the configuration like the
format.binaryAnd viewhelper.</p>

            
    <p>They are used by including the namespace in the file in which the
viewhelper get used.</p>

    </section>
            <section class="section" id="register-namespace">
            <h2>Register Namespace:<a class="headerlink" href="#register-namespace" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            
    <p>Add the xmlns to the html tag in the template</p>

                <div class="code-block-caption">
        <span class="caption-text">EXT:my_extension/Resources/Private/Templates/Map/Map.html</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs xml">xmlns:sf="http://typo3.org/ns/Evoweb/StoreFinder/ViewHelpers"</code></pre>
    <div>        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="minify-viewhelper">
            <h2>minify Viewhelper<a class="headerlink" href="#minify-viewhelper" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            
    <p>This viewhelper gets used to minify the rendered json of the locations
in the result map. The purpose is to reduce the traffic and clean the
source code.
So in stead of making the template unreadable the output gets minified
on rendering time.</p>

            <section class="section" id="example-viewhelper">
            <h4>Example viewhelper:<a class="headerlink" href="#example-viewhelper" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h4>
                <div class="code-block-caption">
        <span class="caption-text">EXT:my_extension/Resources/Private/Templates/Map/Map.html</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs xml">var mapConfiguration = {<span class="hljs-tag">&lt;<span class="hljs-name">sf:minify</span>&gt;</span>active: true,
        <span class="hljs-tag">&lt;<span class="hljs-name">f:for</span> <span class="hljs-attr">each</span>=<span class="hljs-string">"{settings.mapConfiguration}"</span> <span class="hljs-attr">as</span>=<span class="hljs-string">"configuration"</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"name"</span> <span class="hljs-attr">iteration</span>=<span class="hljs-string">"loop"</span>&gt;</span>{name}: '{configuration}',<span class="hljs-tag">&lt;/<span class="hljs-name">f:for</span>&gt;</span>
    center: {
        lat: <span class="hljs-tag">&lt;<span class="hljs-name">f:format.number</span> <span class="hljs-attr">decimals</span>=<span class="hljs-string">"7"</span>&gt;</span>{center.latitude}<span class="hljs-tag">&lt;/<span class="hljs-name">f:format.number</span>&gt;</span>,
        lng: <span class="hljs-tag">&lt;<span class="hljs-name">f:format.number</span> <span class="hljs-attr">decimals</span>=<span class="hljs-string">"7"</span>&gt;</span>{center.longitude}<span class="hljs-tag">&lt;/<span class="hljs-name">f:format.number</span>&gt;</span>
    },
    zoom: '{center.zoom}'
<span class="hljs-tag">&lt;/<span class="hljs-name">sf:minify</span>&gt;</span>};</code></pre>
    <div>        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="example-output">
            <h4>Example output:<a class="headerlink" href="#example-output" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h4>
                <div class="code-block-caption">
        <span class="caption-text">EXT:my_extension/Resources/Private/Templates/Map/Map.html</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs xml">var mapConfiguration = {active:true,apiV3Layers:'',language:'de',center:{lat:50.1125089,lng:8.6521548},zoom:'11'}</code></pre>
    <div>        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
            <section class="section" id="format-binaryand-viewhelper">
            <h2>format.binaryAnd Viewhelper<a class="headerlink" href="#format-binaryand-viewhelper" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            
    <p>To be able to select which partial should be rendered its necessary to
compare with binary and if the part is check in the plugin. As the f:if
viewhelper is not able to do so, a special viewhelper is needed for that.</p>

            
    <p>Basically what this means is, that the setting value, in this case
showBeforeSearch, is formatted with a logical and for comparison like in
the example below. Here we check if the list should be rendered because
in the plugin the binary value 4 stands for list.</p>

            <section class="section" id="example-viewhelper">
            <h4>Example viewhelper:<a class="headerlink" href="#example-viewhelper" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h4>
                <div class="code-block-caption">
        <span class="caption-text">EXT:my_extension/Resources/Private/Templates/Map/Map.html</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">f:if</span> <span class="hljs-attr">condition</span>=<span class="hljs-string">"{sf:format.binaryAnd(base: 4, content: settings.showBeforeSearch)} == 4"</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">f:if</span>&gt;</span></code></pre>
    <div>        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
            <section class="section" id="form-selectcountries">
            <h2>form.selectCountries<a class="headerlink" href="#form-selectcountries" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            
    <p>The countries select viewhelper fetches the countries from
static_info_tables and renders each country as option. All attributes from
the fluid standard form.select are supported. Beside that if the optional
attribute allowedCountries is set, only countries matching it get rendered.
allowedCountries accepts a comma seperated list of ISO2 country codes.</p>

            <section class="section" id="example-viewhelper">
            <h4>Example viewhelper:<a class="headerlink" href="#example-viewhelper" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h4>
                <div class="code-block-caption">
        <span class="caption-text">EXT:my_extension/Resources/Private/Templates/Map/Map.html</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">sf:form.selectCountries</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"country"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"sfrCountry"</span> <span class="hljs-attr">optionValueField</span>=<span class="hljs-string">"isoCodeA3"</span> <span class="hljs-attr">allowedCountries</span>=<span class="hljs-string">"{0: 'DE', 1: 'AT'}"</span> /&gt;</span></code></pre>
    <div>        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
    </section>

        </article>
<article>
            
<section class="section" id="tutorial-1" data-rst-anchor="tutorial">
            <a id="tutorial"></a>
            <h1>Tutorial<a class="headerlink" href="#tutorial-1" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h1>
            <div class="toctree-wrapper compound">
        <ul class="menu-level">
    <li class="toc-item">
    <a href="#installation-1">Installation</a>


</li>
    <li class="toc-item">
    <a href="#custom-event-listener">Custom Event Listener</a>


</li>
    <li class="toc-item">
    <a href="#headless-map-rendering">Headless Map Rendering</a>


</li>
    </ul>
</div>
    </section>

        </article>
<article>
            
<section class="section" id="installation-1" data-rst-anchor="installation">
            <a id="installation"></a>
            <h1>Installation<a class="headerlink" href="#installation-1" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h1>
            <section class="section" id="installation">
            <h2>Installation<a class="headerlink" href="#installation" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            
    <p>To install the extension go to the &quot;Admin Tools&quot; section and select the &quot;Extension Manager&quot;. On the top
selectbox choose &quot;Manage Extensions&quot; and enter store_finder in the search field. Click add to install
the extensions.</p>

            
    <p>In case your organization have a api console key click the cog afterwards and enter the code in the
configuration field.</p>

            
    <p>In rare case that the api url changes and the extensions was not update quick enough you can change the
url used for the geocooding in the same configuration. Be aware that this url only gets used in the
geocoding process. For the search in the frontend you need to change it in TypoScript too.</p>

    </section>
            <section class="section" id="typoscript">
            <h2>TypoScript<a class="headerlink" href="#typoscript" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            
    <p>In general its a good idea to add the include static of the extension to you typoscript record. Otherwise
its not possible to use the country selector which is used in the default template.</p>

    </section>
            <section class="section" id="structure">
            <h2>Structure<a class="headerlink" href="#structure" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            
    <p>Location records can only be added in folders that&#039;s why you need to add at least one folder for storage.
Additionally you need a page with the store_finder plugin. In the plugin configure your needs. To use
locations of the created folder choose it as record storage page on tab behaviour.</p>

    </section>
            <section class="section" id="templating">
            <h2>Templating<a class="headerlink" href="#templating" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            
    <p>To change the frontend templates you most likely need to change the partials. These contain of search, map
and list part. Copy the folder from the extension to your local path like the fileadmin. To use these copies
you can change the path either in the plugin field &quot;Partial path&quot; or via TypoScript:</p>

                <div class="code-block-caption">
        <span class="caption-text">EXT:my_extension/Configuration/TypoScript/setup.typoscript</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript">plugin.tx_storefinder.view.partialRootPaths.<span class="hljs-title">50</span> = ./yourpath/Partials/</code></pre>
    <div>        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="api-keys">
            <h2>API Keys<a class="headerlink" href="#api-keys" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            
    <p>If you need to geocode coordinates, either on saving a store record or in bulk with the geocode console command
you need to add an additional key in TypoScript constants apiConsoleKeyGeocoding. This key will never be visible
to any visitors of your page.</p>

            
    <p>There are two keys needed because the key used in geocoding may not be restricted at all. But you also dont
want to deliver pages with an key that is not restricted to the domain in frontend rendering, because then it
would be possible that others use the key and by that causes you to pay for usage that wasn&#039;t by your page.</p>

            <dl>
                        <dt>So, it&#039;s advised to have both keys</dt>
        
        <dd>

<ul>
    <li class="dash">apiConsoleKey (protected by restriction for your domains)</li>
    <li class="dash">apiConsoleKeyGeocoding (unrestricted for the usage in php)</li>
</ul>
</dd>
            </dl>
            
    <p>To obtain a key please visit <a href="https://developers.google.com/maps/get-started">https://developers.google.com/maps/get-started</a></p>

    </section>
            <section class="section" id="set-default-coordinates">
            <h2>Set default coordinates<a class="headerlink" href="#set-default-coordinates" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            
    <p>In TypoScript setup it&#039;s possible to set defaultConstraints these are filled in the contraints object if no
search was requested. In the example below the zoom, latitude and longitude values are set and then the
coordinates are used to render search results that are near of them.</p>

                <div class="code-block-caption">
        <span class="caption-text">EXT:my_extension/Configuration/TypoScript/setup.typoscript:</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript">plugin.tx_storefinder.settings {
   showLocationsForDefaultConstraint = 1
   defaultConstraint {
      zoom = 15
      latitude = <span class="hljs-title">51</span>.5135
      longitude = <span class="hljs-title">7</span>.464
   }
}</code></pre>
    <div>        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="use-caching-map-action">
            <h2>Use caching map action<a class="headerlink" href="#use-caching-map-action" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            
    <p>As of version 6.1.0 a cached map action is available. To use it with custom templates it importand to
copy the <code class="code-inline" translate="no">Templates/Map/CachedMap.html</code> to your sitepackage.</p>

            
    <p>In addition to that it&#039;s importand to add the <code class="code-inline" translate="no">&lt;sf:cache location=&quot;{location}&quot;/&gt;</code> ViewHelper to the
<code class="code-inline" translate="no">Partials/Locations.html</code> to be able to clear cache on additing a location record without manually click
the clear cache flash.</p>

    </section>
    </section>

        </article>
<article>
            
<section class="section" id="custom-event-listener" data-rst-anchor="customEventListener">
            <a id="customEventListener"></a>
            <h1>Custom Event Listener<a class="headerlink" href="#custom-event-listener" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h1>
            <section class="section" id="adding-custom-event-listener">
            <h2>Adding custom event listener<a class="headerlink" href="#adding-custom-event-listener" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            
    <p>To add an custom listener, add the code below and replace the following and replace all the
my* with your own values, but keep the event name as it is.</p>

                <div class="code-block-caption">
        <span class="caption-text">EXT:your_extension/Classes/EventListener/MapGetSpecialLocationsListener.php</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs php"><span class="hljs-keyword">namespace</span> <span class="hljs-title">MyVendor</span>\<span class="hljs-title">MyExtension</span>\<span class="hljs-title">EventListener</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">Evoweb</span>\<span class="hljs-title">StoreFinder</span>\<span class="hljs-title">Controller</span>\<span class="hljs-title">Event</span>\<span class="hljs-title">MapGetLocationsByConstraintsEvent</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">TYPO3</span>\<span class="hljs-title">CMS</span>\<span class="hljs-title">Core</span>\<span class="hljs-title">Attribute</span>\<span class="hljs-title">AsEventListener</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MapGetSpecialLocationsListener</span>
</span>{
   <span class="hljs-comment">#[AsEventListener('myextension_mapcontroller_fetchspeciallocations', MapGetLocationsByConstraintsEvent::class)]</span>
   <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__invoke</span><span class="hljs-params">(MapGetLocationsByConstraintsEvent $event)</span>: <span class="hljs-title">void</span>
   </span>{
   }
}</code></pre>
    <div>        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>

        </article>
<article>
            
<section class="section" id="headless-map-rendering" data-rst-anchor="headlessMapRendering">
            <a id="headlessMapRendering"></a>
            <h1>Headless Map Rendering<a class="headerlink" href="#headless-map-rendering" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h1>
            <section class="section" id="introduction-of-middleware">
            <h2>Introduction of middleware<a class="headerlink" href="#introduction-of-middleware" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            
    <p>With the introduction of the StoreFinderMiddleware it&#039;s possible to integrate a
headless version of the map.</p>

            
    <p>The middleware provides categories and locations. In addition its possible to
use location and fulltext search in combination with category filtering.</p>

            
    <p>Only the endpoints are provided. You need to implement the javascript yourself.</p>

    </section>
            <section class="section" id="preparation-of-data">
            <h2>Preparation of data<a class="headerlink" href="#preparation-of-data" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            
    <p>To modify the categories and locations events ModifyMiddlewareCategoriesEvent
and ModifyMiddlewareLocationsEvent are provided.</p>

            
    <p>As an example on how to use the ModifyMiddlewareLocationsEvent the listener
ModifyMiddlewareLocationsListener is present.</p>

    </section>
            <section class="section" id="integration">
            <h2>Integration<a class="headerlink" href="#integration" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            
    <p>To use the middleware, it&#039;s important to include th Ajax.yaml in the site config</p>

                <div class="code-block-caption">
        <span class="caption-text">config/sites/{your-site}/config.yaml</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs yaml"><span class="hljs-attr">imports:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">{</span> <span class="hljs-attr">resource:</span> <span class="hljs-string">'EXT:store_finder/Configuration/Routes/Ajax.yaml'</span> <span class="hljs-string">}</span></code></pre>
    <div>        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p>Fields to output and conversion can be changed with TypoScript key plugin.tx_storefinder.ajax</p>

    </section>
            <section class="section" id="template-example">
            <h2>Template example<a class="headerlink" href="#template-example" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            
    <p>Below is an example on how to use the configuration and endpoints with your
custom code.</p>

                <div class="code-block-caption">
        <span class="caption-text">Map.html</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">store-finder-map</span>
    <span class="hljs-attr">showSearch</span>=<span class="hljs-string">"{sf:bitwiseIf(a: settings.showBeforeSearch, b: 1, then: 1, else: 0)}"</span>
    <span class="hljs-attr">showList</span>=<span class="hljs-string">"{sf:bitwiseIf(a: settings.showBeforeSearch, b: 4, then: 1, else: 0)}"</span>
    <span class="hljs-attr">categoriesEndpoint</span>=<span class="hljs-string">"{f:uri.typolink(parameter: '/api/storefinder/categories/{cObjectData.uid}')}"</span>
    <span class="hljs-attr">locationsEndpoint</span>=<span class="hljs-string">"{f:uri.typolink(parameter: '/api/storefinder/locations/{cObjectData.uid}')}"</span>/&gt;</span></code></pre>
    <div>        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>

        </article>
<article>
            
<section class="section" id="import-command" data-rst-anchor="importCommand">
            <a id="importCommand"></a>
            <h1>Import command<a class="headerlink" href="#import-command" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h1>
            
    <p>By using the import command its possible to import locations from a a spreadsheet
into a storage folder. If given references to attributes, categories and files are
created.</p>

            <section class="section" id="arguments">
            <h2>Arguments<a class="headerlink" href="#arguments" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            

<ul>
    <li>fileName
StorageId (most likely 1) and path and filename of excel file that should be imported relatively to the storage (fileadmin) Eg: 1:/user_upload/locations.xlsx</li>
</ul>

    </section>
            <section class="section" id="options">
            <h2>Options<a class="headerlink" href="#options" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            

<ul>
    <li>--storagePid -s
Page id of storage folder. Default is 1.</li>
    <li>--clearStorageFolder -c
Flag if storage folder should be emptied before importing</li>
    <li>--columnMap -o
Json encoded column map array. Defaults to {&quot;A&quot;:&quot;import_id&quot;,&quot;B&quot;:{0:&quot;name&quot;,1:&quot;storeid&quot;}},&quot;C&quot;:&quot;address&quot;,&quot;D&quot;:&quot;city&quot;,&quot;E&quot;:&quot;zipcode&quot;,&quot;F&quot;:&quot;country&quot;,&quot;G&quot;:&quot;state&quot;,&quot;H&quot;:&quot;person&quot;,&quot;I&quot;:&quot;url&quot;,&quot;J&quot;:&quot;image&quot;}</li>
    <li>--attributeMap -a
Json encoded attribute map array. Defaults to {&quot;K&quot;:{&quot;att1&quot;:1}}</li>
    <li>--categoryMap -t
Json encoded attribute map array. Defaults to {&quot;L&quot;:{&quot;cat1&quot;:1}}</li>
</ul>

    </section>
            <section class="section" id="transformation">
            <h2>Transformation<a class="headerlink" href="#transformation" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            

<ul>
    <li>the first line will always be ignored.</li>
    <li>transformation is in order of attributes, categories, location fields.</li>
    <li>every column in one of the three maps is imported in a location field</li>
    <li>country, state, image, media, icon are special fields
<em> country is a ISO3 code for a country and is stored in the country field as uid of the static_country record
</em> state is a zones code for a state and is stored in the state field as uid of the static_country_zones record
<em> image is a file path and name relative to file storage like 1:/user_upload/test.jpg and is referenced by sys_file_reference
</em> media is a file path and name relative to file storage like 1:/user_upload/video.mp4 and is referenced by sys_file_reference
* icon is a file path and name relative to file storage like 1:/user_upload/icon.jpg and is referenced by sys_file_reference</li>
    <li>references to attributes, categories and files are removed if not present any more</li>
</ul>

    </section>
            <section class="section" id="importing-constraints">
            <h2>Importing constraints<a class="headerlink" href="#importing-constraints" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            

<ul>
    <li>if import_id is set updating locations is possible</li>
    <li>it&#039;s always an incremental import</li>
    <li>if a full import should be performed the flag clearStorageFolder needs to be true, then the folder gets emptied before importing</li>
    <li>it&#039;s possible to import multiple references for attributes, categories and files</li>
    <li>by adding multiple columns containing file information:
H, I, J
&quot;1:/user_upload/image1.jpeg&quot;,&quot;1:/user_upload/image1.jpeg&quot;,&quot;1:/user_upload/image1.jpeg&quot;
and change the configuration object like:
{...&quot;H&quot;:&quot;image&quot;,&quot;I&quot;:&quot;image&quot;,&quot;J&quot;:&quot;image&quot;...}
The result is, that the locations has three images referenced</li>
</ul>

    </section>
            <section class="section" id="examples-of-import-command-calls">
            <h2>Examples of import command calls<a class="headerlink" href="#examples-of-import-command-calls" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
                <div class="code-block-caption">
        <span class="caption-text">On command line</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs bash">vendor/bin/typo3 storefinder:import --storagePid=202 --clearStorageFolder=1 filename

vendor/bin/typo3 storefinder:import --columnMap=<span class="hljs-string">"{\"A\":\"import_id\",\"B\":\"name\",\"D\":\"city\"}"</span> <span class="hljs-string">"1:/user_upload/ExportExcel.xlsx"</span>
vendor/bin/typo3 storefinder:import \
  -c \
  --storagePid=2
  -o<span class="hljs-string">"{\"A\":\"import_id\",\"B\":\"name\",\"D\":\"city\"}"</span> \
  <span class="hljs-string">"1:/user_upload/ExportExcel.xlsx"</span></code></pre>
    <div>        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>

        </article>
<article>
            
<section class="section" id="deprecation-1" data-rst-anchor="deprecation">
            <a id="deprecation"></a>
            <h1>Deprecation<a class="headerlink" href="#deprecation-1" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h1>
            <section class="section" id="version-6-0-0">
            <h2>Version 6.0.0<a class="headerlink" href="#version-6-0-0" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            <section class="section" id="replaced-viewhelper">
            <h3>Replaced ViewHelper<a class="headerlink" href="#replaced-viewhelper" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h3>
            
    <p>The binary handling is replaced in the Partials/Map.html</p>

                <div class="code-block-caption">
        <span class="caption-text">Before</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">f:if</span> <span class="hljs-attr">condition</span>=<span class="hljs-string">"{sf:format.binaryAnd(base: 1, content: settings.showBeforeSearch)} == 1"</span>&gt;</span></code></pre>
    <div>        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
                <div class="code-block-caption">
        <span class="caption-text">After</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">sf:bitwiseIf</span> <span class="hljs-attr">a</span>=<span class="hljs-string">"{comparisonValue}"</span> <span class="hljs-attr">b</span>=<span class="hljs-string">"1"</span>&gt;</span></code></pre>
    <div>        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="removed-viewhelper">
            <h3>Removed ViewHelper<a class="headerlink" href="#removed-viewhelper" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h3>
            
    <p>The <code>&lt;sf:removeEscaping&gt;</code> ViewHelper is not used any more and will get removed</p>

    </section>
    </section>
    </section>

        </article>
<article>
            
<section class="section" id="breaking-changes-1" data-rst-anchor="breaking-changes">
            <a id="breaking-changes"></a>
            <h1>Breaking Changes<a class="headerlink" href="#breaking-changes-1" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h1>
            <section class="section" id="20-mai-2024">
            <h2>20. Mai 2024<a class="headerlink" href="#20-mai-2024" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            
    <p>Result of location repository functions are either location model or array of
location models.</p>

            
    <p>Removed QueryBuilderHelper. The queryBuilder gets assignment to the query as
statement and let Extbase take care of the conversion.</p>

            
    <p>The country selector does not take string indexes anymore. If you used isoCodeA2
or isoCodeA3 in TypoScript before, you need to change your Search.html partial
to only use {constraint.country.uid} as value and set the optionValueField=&quot;uid&quot;
argument of the sf:form.selectCountries ViewHelper.</p>

            
    <p>The countryValueType setting in TypoScript is dropped.</p>

            
    <p>Refactor geocode service to use TYPO3CMSCoreHttpClientGuzzleClientFactory
instead of creating of using HttpAdapterGuzzle7Client directly</p>

    </section>
            <section class="section" id="17-february-2023">
            <h2>17. February 2023<a class="headerlink" href="#17-february-2023" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            <section class="section" id="remove-allowed-on-standard-page">
            <h3>Remove allowed on standard page<a class="headerlink" href="#remove-allowed-on-standard-page" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h3>
            
    <p>Records of attributes and locations are not allowed on standard pages anymore.</p>

    </section>
    </section>
            <section class="section" id="29-august-2022">
            <h2>29. August 2022<a class="headerlink" href="#29-august-2022" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            
    <p>The import command is refactored and the arguments and options are cleaned up. Please read the <a href="#importCommand">docs</a> for the changes</p>

    </section>
            <section class="section" id="15-february-2021">
            <h2>15. February 2021<a class="headerlink" href="#15-february-2021" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            <section class="section" id="rename-property">
            <h3>Rename property<a class="headerlink" href="#rename-property" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h3>
            
    <p>Rename content to contentElement in location model</p>

    </section>
    </section>
            <section class="section" id="01-mai-2020">
            <h2>01. Mai 2020<a class="headerlink" href="#01-mai-2020" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            <section class="section" id="refactor-signal-slots-to-psr-14-events">
            <h3>Refactor signal slots to PSR-14 events<a class="headerlink" href="#refactor-signal-slots-to-psr-14-events" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h3>
            
    <p>All slots are replaced with events
EvowebStoreFinderControllerMapController mapActionWithConstraint with MapGetLocationsByConstraintsEvent</p>

    </section>
    </section>
            <section class="section" id="03-october-2019">
            <h2>03. October 2019<a class="headerlink" href="#03-october-2019" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            <section class="section" id="drop-migration-wizard">
            <h3>Drop migration wizard<a class="headerlink" href="#drop-migration-wizard" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h3>
            
    <p>Dropped support of LocationMigrationWizard. It&#039;s now more then three years that locator is not really supported
anymore. Who every wants to migrate locations should use version 3.x and upgrade afterwards.</p>

    </section>
            <section class="section" id="change-geocoding">
            <h3>Change geocoding<a class="headerlink" href="#change-geocoding" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h3>
            
    <p>Change to use geocoder-php/geocoder for geocoding locations. By this a hole spectrum of <a href="https://github.com/geocoder-php/Geocoder#world">providers/geocoders</a>
are available now</p>

    </section>
            <section class="section" id="migration-steps">
            <h3>Migration steps<a class="headerlink" href="#migration-steps" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h3>
            
    <p>Please check the extension configuration whether the api key assignment still works</p>

    </section>
    </section>
            <section class="section" id="31-january-2019">
            <h2>31. January 2019<a class="headerlink" href="#31-january-2019" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            
    <p>Drop already deprecated GeocodeLocationsTask in favor of GeocodeLocationsCommandController</p>

            
    <p>Deprecate GeocodeLocationsCommandController to be replaced with GeocodeLocationsCommand once support for
TYPO3 8.7 gets dropped.</p>

    </section>
            <section class="section" id="18-may-2019">
            <h2>18. May 2019<a class="headerlink" href="#18-may-2019" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            
    <p>As of now configuration.insertSingleViewInto is deprecated and removed.</p>

            
    <p>Please use configuration.renderSingleViewCallback instead. This should contain a callback function
which renders the single view element. As parameter location and infoWindowTemplate are available.
In addition a configuration.handleCloseButtonCallback should be provided.</p>

            
    <p>Example:</p>

                <div class="code-block-caption">
        <span class="caption-text">EXT:my_extension/Resources/Public/JavaScript/map.js</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">configuration.renderSingleViewCallback = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">location, infoWindowTemplate</span>) </span>{
      location[<span class="hljs-string">'information'</span>][<span class="hljs-string">'staticMapCenter'</span>] = <span class="hljs-built_in">encodeURIComponent</span>(location.information.address) + <span class="hljs-string">',+'</span>
         + <span class="hljs-built_in">encodeURIComponent</span>(location.information.zipcode) + <span class="hljs-string">',+'</span>
         + <span class="hljs-built_in">encodeURIComponent</span>(location.information.city) + <span class="hljs-string">',+'</span>
         + <span class="hljs-built_in">encodeURIComponent</span>(location.information.country);

      html = infoWindowTemplate.render(location.information);

      <span class="hljs-keyword">var</span> $singleView = $(<span class="hljs-string">'.yourSingleView'</span>);
      <span class="hljs-keyword">if</span> ($singleView.hasClass(<span class="hljs-string">'show'</span>)) {
         $singleView.hide();
         $singleView.removeClass(<span class="hljs-string">'show'</span>);
      }
      $singleView.html(html);
      $singleView.show();
      $singleView.addClass(<span class="hljs-string">'show'</span>);

      $(<span class="hljs-string">'body'</span>).trigger(<span class="hljs-string">'initializeTabs'</span>);
};

configuration.handleCloseButtonCallback = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">button</span>) </span>{
      <span class="hljs-keyword">var</span> $singleView = button.parents(<span class="hljs-string">'.yourSingleView'</span>);
      $singleView.hide();
      $singleView.removeClass(<span class="hljs-string">'show'</span>);
}</code></pre>
    <div>        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="10-january-2019">
            <h2>10. January 2019<a class="headerlink" href="#10-january-2019" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h2>
            
    <p>As of the location model does not escapeJsonString any properties anymore. With this getNameRaw and
getCityRaw are dropped.</p>

            <section class="section" id="migration-steps">
            <h3>Migration steps<a class="headerlink" href="#migration-steps" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h3>
            
    <p>Check for {location.nameRaw} and {location.cityRaw} and replace it with
{location.nameRaw -&gt; f:format.json()} and {location.cityRaw -&gt; f:format.json()}</p>

            
    <p>All {location.* -&gt; f:format.json()} usage may not be wrapped in &quot; or &#039;. If present remove those.</p>

    </section>
    </section>
    </section>

        </article>
<article>
            
<section class="section" id="sitemap">
            <h1>Sitemap<a class="headerlink" href="#sitemap" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">¶</a></h1>
    </section>

        </article>
<!-- content end -->
                                                        </div>
            </div>
        </div>
    </main>

    <div class="modal fade" id="linkReferenceModal" tabindex="-1" aria-labelledby="linkReferenceModalLabel"
    aria-hidden="true" data-current-filename="">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="linkReferenceModalLabel">Reference to the headline</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="alert alert-success d-none" id="permalink-alert-success" role="alert"></div>
                <div class="mb-3">
                    <label for="permalink-uri" class="col-form-label">Permalink</label>
                    <div class="input-group">
                        <input class="form-control code" id="permalink-uri" readonly>
                        <button type="button" class="btn btn-outline-secondary copy-button" data-target="permalink-uri"><i class="far fa-clone"></i></button>
                    </div>
                    <p>Copy and freely share the link</p>
                </div>
                <div class="mb-3">
                    <div class="alert alert-warning alert-permalink-rst" role="alert">This link target has no permanent anchor assigned.The link below can be used, but is prone to change if the page gets moved.
                    </div>
                    <label for="permalink-rst" class="col-form-label">reStructuredText (reST):</label>
                    <div class="input-group">
                        <textarea class="form-control code" id="permalink-rst" readonly></textarea>
                        <button type="button" class="btn btn-outline-secondary copy-button" data-target="permalink-rst"><i class="far fa-clone"></i></button>
                    </div>
                    <p>Copy this link into your TYPO3 manual. </p>
                </div>
                <div class="mb-3">
                    <label for="permalink-html" class="col-form-label">HTML:</label>
                    <div class="input-group">
                        <textarea class="form-control code" id="permalink-html" readonly></textarea>
                        <button type="button" class="btn btn-outline-secondary copy-button" data-target="permalink-html"><i class="far fa-clone"></i></button>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>    <div class="modal fade" id="generalModal" tabindex="-1" aria-labelledby="linkReferenceModalLabel"
    aria-hidden="true" data-current-filename=""
>
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="generalModalLabel"></h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="alert alert-success d-none" id="general-alert-success" role="alert"></div>
                <div id="generalModalContent">
                </div>
            </div>
            <div class="modal-footer justify-content-between">
                <div id="generalModalCustomButtons"></div>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"><i class="fa-regular fa-circle-xmark"></i>&nbsp;Close</button>
            </div>
        </div>
    </div>
</div></div>


<footer class="page-footer">
    <div class="frame frame-ruler-before frame-background-dark">
        <div class="frame-container">
            <div class="frame-inner">
                                <div class="footer-additional">
                    <p class="text-center">Last rendered: Aug 01, 2024 20:09</p>
                </div>
                <div class="footer-meta">
                    <ul class="footer-meta-navigation">
                        <li><a href="https://typo3.org/legal-notice" rel="nofollow" target="_blank" title="Legal Notice">Legal Notice</a></li>
                        <li><a href="https://typo3.org/privacy-policy" rel="nofollow" target="_blank" title="Privacy Policy">Privacy Policy</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</footer>
<script src="../_resources/js/popper.min.js"></script>
<script src="../_resources/js/bootstrap.min.js"></script>
<script src="../_resources/js/theme.min.js"></script>

<!--
 Locally rendered. No tracking embedded.
-->
</body>
</html>